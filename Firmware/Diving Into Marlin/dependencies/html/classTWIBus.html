<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Marlin: TWIBus Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Marlin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classTWIBus-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TWIBus Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="twibus_8h_source.html">twibus.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a95355e79ed30c2c62265651813ecc915"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a95355e79ed30c2c62265651813ecc915">TWIBus</a> ()</td></tr>
<tr class="memdesc:a95355e79ed30c2c62265651813ecc915"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class constructor.  <a href="#a95355e79ed30c2c62265651813ecc915">More...</a><br /></td></tr>
<tr class="separator:a95355e79ed30c2c62265651813ecc915"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749606c4d6a2d4082b97a58d34530877"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a749606c4d6a2d4082b97a58d34530877">reset</a> ()</td></tr>
<tr class="memdesc:a749606c4d6a2d4082b97a58d34530877"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the buffer.  <a href="#a749606c4d6a2d4082b97a58d34530877">More...</a><br /></td></tr>
<tr class="separator:a749606c4d6a2d4082b97a58d34530877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa47f1148edeb254471ed969fb4e6a618"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#aa47f1148edeb254471ed969fb4e6a618">send</a> ()</td></tr>
<tr class="memdesc:aa47f1148edeb254471ed969fb4e6a618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the buffer data to the bus.  <a href="#aa47f1148edeb254471ed969fb4e6a618">More...</a><br /></td></tr>
<tr class="separator:aa47f1148edeb254471ed969fb4e6a618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a520819377ab6ace532fbcc9c31db4f6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a520819377ab6ace532fbcc9c31db4f6e">addbyte</a> (const char c)</td></tr>
<tr class="memdesc:a520819377ab6ace532fbcc9c31db4f6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add one byte to the buffer.  <a href="#a520819377ab6ace532fbcc9c31db4f6e">More...</a><br /></td></tr>
<tr class="separator:a520819377ab6ace532fbcc9c31db4f6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58fccfaaa95a0043ad1e558e6988f5bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a58fccfaaa95a0043ad1e558e6988f5bb">addbytes</a> (char src[], uint8_t bytes)</td></tr>
<tr class="memdesc:a58fccfaaa95a0043ad1e558e6988f5bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add some bytes to the buffer.  <a href="#a58fccfaaa95a0043ad1e558e6988f5bb">More...</a><br /></td></tr>
<tr class="separator:a58fccfaaa95a0043ad1e558e6988f5bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa09130f9248b689d69788297d028df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#acaa09130f9248b689d69788297d028df">addstring</a> (char str[])</td></tr>
<tr class="memdesc:acaa09130f9248b689d69788297d028df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a null-terminated string to the buffer.  <a href="#acaa09130f9248b689d69788297d028df">More...</a><br /></td></tr>
<tr class="separator:acaa09130f9248b689d69788297d028df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1fbd08163e7754b6f6ff8d8bcba4667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#ae1fbd08163e7754b6f6ff8d8bcba4667">address</a> (const uint8_t adr)</td></tr>
<tr class="memdesc:ae1fbd08163e7754b6f6ff8d8bcba4667"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the target slave address.  <a href="#ae1fbd08163e7754b6f6ff8d8bcba4667">More...</a><br /></td></tr>
<tr class="separator:ae1fbd08163e7754b6f6ff8d8bcba4667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57c14eaf707f9d17a00e4abc78ac8137"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a57c14eaf707f9d17a00e4abc78ac8137">echobuffer</a> (const char prefix[], uint8_t adr)</td></tr>
<tr class="memdesc:a57c14eaf707f9d17a00e4abc78ac8137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Echo data in the buffer to serial.  <a href="#a57c14eaf707f9d17a00e4abc78ac8137">More...</a><br /></td></tr>
<tr class="separator:a57c14eaf707f9d17a00e4abc78ac8137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee5911687532078310386c5b43865a0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a0ee5911687532078310386c5b43865a0">request</a> (const uint8_t bytes)</td></tr>
<tr class="memdesc:a0ee5911687532078310386c5b43865a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request data from the slave device and wait.  <a href="#a0ee5911687532078310386c5b43865a0">More...</a><br /></td></tr>
<tr class="separator:a0ee5911687532078310386c5b43865a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3ec59ac872d48cbffd2c14520fd982"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a4b3ec59ac872d48cbffd2c14520fd982">capture</a> (char *dst, const uint8_t bytes)</td></tr>
<tr class="memdesc:a4b3ec59ac872d48cbffd2c14520fd982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capture data from the bus into the buffer.  <a href="#a4b3ec59ac872d48cbffd2c14520fd982">More...</a><br /></td></tr>
<tr class="separator:a4b3ec59ac872d48cbffd2c14520fd982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0e39a01b1450eab2200a419a53b5cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a6c0e39a01b1450eab2200a419a53b5cb">relay</a> (const uint8_t bytes)</td></tr>
<tr class="memdesc:a6c0e39a01b1450eab2200a419a53b5cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request data from the slave device, echo to serial.  <a href="#a6c0e39a01b1450eab2200a419a53b5cb">More...</a><br /></td></tr>
<tr class="separator:a6c0e39a01b1450eab2200a419a53b5cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a19b458ae71001dd7c0fbc9c47744f01f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a19b458ae71001dd7c0fbc9c47744f01f">echoprefix</a> (uint8_t bytes, const char prefix[], uint8_t adr)</td></tr>
<tr class="memdesc:a19b458ae71001dd7c0fbc9c47744f01f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prefix for echo to serial.  <a href="#a19b458ae71001dd7c0fbc9c47744f01f">More...</a><br /></td></tr>
<tr class="separator:a19b458ae71001dd7c0fbc9c47744f01f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81e3b818c26d06415fe477242e9d5448"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a81e3b818c26d06415fe477242e9d5448">echodata</a> (uint8_t bytes, const char prefix[], uint8_t adr)</td></tr>
<tr class="memdesc:a81e3b818c26d06415fe477242e9d5448"><td class="mdescLeft">&#160;</td><td class="mdescRight">Echo data on the bus to serial.  <a href="#a81e3b818c26d06415fe477242e9d5448">More...</a><br /></td></tr>
<tr class="separator:a81e3b818c26d06415fe477242e9d5448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae417fa9c961555be22188f046a496b53"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#ae417fa9c961555be22188f046a496b53">flush</a> ()</td></tr>
<tr class="memdesc:ae417fa9c961555be22188f046a496b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the i2c bus.  <a href="#ae417fa9c961555be22188f046a496b53">More...</a><br /></td></tr>
<tr class="separator:ae417fa9c961555be22188f046a496b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a55efe7f179365edf455cd34659304202"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classTWIBus.html#a55efe7f179365edf455cd34659304202">addr</a> = 0</td></tr>
<tr class="memdesc:a55efe7f179365edf455cd34659304202"><td class="mdescLeft">&#160;</td><td class="mdescRight">Target device address  The target device address. Persists until changed.  <a href="#a55efe7f179365edf455cd34659304202">More...</a><br /></td></tr>
<tr class="separator:a55efe7f179365edf455cd34659304202"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TWIBUS class</p>
<p>This class implements a wrapper around the two wire (I2C) bus, it allows Marlin to send and request data from any slave device on the bus. This is an experimental feature and it's inner workings as well as public facing interface are prune to change in the future.</p>
<p>The two main consumers of this class are M260 and M261, where M260 allows Marlin to send a I2C packet to a device (please be aware that no repeated starts are possible), this can be done in caching method by calling multiple times M260 B&lt;byte-1 value in base 10&gt; or a one liner M260, have a look at the gcode_M260() function for more information. M261 allows Marlin to request data from a device, the received data is then relayed into the serial line for host interpretation. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a95355e79ed30c2c62265651813ecc915"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TWIBus::TWIBus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Class constructor. </p>
<p>Initialize the TWI bus and clear the buffer </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a520819377ab6ace532fbcc9c31db4f6e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::addbyte </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add one byte to the buffer. </p>
<p>Add a byte to the end of the buffer. Silently fails if the buffer is full.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>a data byte </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a58fccfaaa95a0043ad1e558e6988f5bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::addbytes </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>src</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add some bytes to the buffer. </p>
<p>Add bytes to the end of the buffer. Concatenates at the buffer size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>source data address </td></tr>
    <tr><td class="paramname">bytes</td><td>the number of bytes to add </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae1fbd08163e7754b6f6ff8d8bcba4667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::address </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>adr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the target slave address. </p>
<p>The target slave address for sending the full packet</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">adr</td><td>7-bit integer address </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acaa09130f9248b689d69788297d028df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::addstring </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>str</em>[]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a null-terminated string to the buffer. </p>
<p>Add bytes to the end of the buffer up to a nul. Concatenates at the buffer size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>source string address </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4b3ec59ac872d48cbffd2c14520fd982"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t TWIBus::capture </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capture data from the bus into the buffer. </p>
<p>Capture data after a request has succeeded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the number of bytes to request </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes captured to the buffer </dd></dl>

</div>
</div>
<a class="anchor" id="a57c14eaf707f9d17a00e4abc78ac8137"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::echobuffer </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>prefix</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>adr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Echo data in the buffer to serial. </p>
<p>Echo the entire buffer to serial to serial in a parser-friendly format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the number of bytes to request </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a81e3b818c26d06415fe477242e9d5448"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TWIBus::echodata </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>prefix</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>adr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Echo data on the bus to serial. </p>
<p>Echo some number of bytes from the bus to serial in a parser-friendly format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the number of bytes to request </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a19b458ae71001dd7c0fbc9c47744f01f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TWIBus::echoprefix </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>prefix</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>adr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prefix for echo to serial. </p>
<p>Echo a label, length, address, and "data:"</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the number of bytes to request </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae417fa9c961555be22188f046a496b53"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TWIBus::flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flush the i2c bus. </p>
<p>Get all bytes on the bus and throw them away. </p>

</div>
</div>
<a class="anchor" id="a6c0e39a01b1450eab2200a419a53b5cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::relay </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request data from the slave device, echo to serial. </p>
<p>Request a number of bytes from a slave device and output the returned data to serial in a parser-friendly format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the number of bytes to request </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0ee5911687532078310386c5b43865a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool TWIBus::request </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request data from the slave device and wait. </p>
<p>Request a number of bytes from a slave device. Wait for the data to arrive, and return true on success.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bytes</td><td>the number of bytes to request </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status of the request: true=success, false=fail </dd></dl>

</div>
</div>
<a class="anchor" id="a749606c4d6a2d4082b97a58d34530877"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the buffer. </p>
<p>Set the buffer to a known-empty state </p>

</div>
</div>
<a class="anchor" id="aa47f1148edeb254471ed969fb4e6a618"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TWIBus::send </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send the buffer data to the bus. </p>
<p>Flush the buffer to the target address </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a55efe7f179365edf455cd34659304202"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t TWIBus::addr = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Target device address  The target device address. Persists until changed. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="twibus_8h_source.html">twibus.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
